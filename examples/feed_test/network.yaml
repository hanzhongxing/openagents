# Feed Mod Test Network Configuration
# This network provides a test environment for the Feed mod
# Features: gRPC transport, feed broadcasting, messaging

network:
  name: "FeedTestNetwork"
  mode: "centralized"
  node_id: "feed-test-1"

  # Transport configuration
  transports:
    - type: "http"
      config:
        port: 8700
    - type: "grpc"
      config:
        port: 8600
        max_message_size: 104857600  # 100MB
        compression: "gzip"
        keepalive_time: 60000  # 60 seconds in milliseconds
        keepalive_timeout: 30000  # 30 seconds in milliseconds
        keepalive_permit_without_calls: false
        max_connection_idle: 300000  # 5 minutes in milliseconds
        max_connection_age: 1800000  # 30 minutes in milliseconds
        http2_max_pings_without_data: 0
        http2_min_time_between_pings: 60000  # 60 seconds between pings
        http2_min_ping_interval_without_data: 300000  # 5 minutes without data

  # Transport for providing the network manifest
  manifest_transport: "http"

  # Recommended transport for agent-to-network communication
  recommended_transport: "grpc"

  # Security configuration
  encryption_enabled: false  # Disabled for local development

  # Discovery configuration
  discovery_interval: 10
  discovery_enabled: true

  # Connection management
  max_connections: 100
  connection_timeout: 30.0
  retry_attempts: 3
  heartbeat_interval: 60
  agent_timeout: 180

  # Messaging configuration
  message_queue_size: 1000
  message_timeout: 30.0
  message_routing_enabled: true

  # Mod configuration
  mods:
    # Feed mod for one-way information broadcasting
    - name: "openagents.mods.workspace.feed"
      enabled: true
      config:
        # Post settings
        max_title_length: 200
        max_content_length: 50000

        # Categories
        categories:
          - "announcements"
          - "updates"
          - "info"
          - "alerts"

        # Search settings
        enable_search: true
        search_results_limit: 50

        # Attachment settings
        max_attachment_size: 10485760  # 10MB
        allowed_attachment_types: ["txt", "md", "pdf", "jpg", "png", "json", "yaml"]

    # Thread Messaging for general communication
    - name: "openagents.mods.workspace.messaging"
      enabled: true
      config:
        default_channels:
          - name: "general"
            description: "General discussions"
          - name: "feed-notifications"
            description: "Feed post notifications"

        max_file_size: 10485760  # 10MB
        allowed_file_types: ["txt", "md", "py", "json", "yaml", "pdf", "jpg", "png"]
        file_storage_path: "./feed_files"
        file_retention_days: 90
        max_message_history: 10000
        message_retention_days: 180
        max_thread_depth: 10
        thread_collapse_threshold: 25

    # Forum for discussions (comparison with feed)
    - name: "openagents.mods.workspace.forum"
      enabled: true
      config:
        max_topics_per_agent: 100
        max_comments_per_topic: 1000
        max_comment_depth: 10
        max_topic_title_length: 200
        max_topic_content_length: 10000
        max_comment_length: 5000
        enable_voting: true
        vote_weight: 1
        enable_search: true
        search_results_limit: 50

    # Workspace default functionality
    - name: "openagents.mods.workspace.default"
      enabled: true
      config:
        workspace_type: "feed_test"

# Network profile for discovery
network_profile:
  discoverable: true
  name: "Feed Test Network"
  description: "A test network for the Feed mod - one-way information broadcasting with immutable posts, search, and filtering"
  icon: "https://openagents.org/icons/feed-test.png"
  website: "https://openagents.org"
  tags:
    - "feed"
    - "test"
    - "broadcasting"
    - "announcements"
    - "updates"
    - "alerts"
  categories:
    - "productivity"
    - "broadcasting"
    - "testing"
  country: "Worldwide"
  required_openagents_version: "0.6.15"
  capacity: 100
  authentication:
    type: "none"  # Open test environment
  host: "0.0.0.0"
  port: 8700

# Global settings
log_level: "INFO"
data_dir: "./data/feed-test"

# Runtime configuration
runtime_limit: null
shutdown_timeout: 30
