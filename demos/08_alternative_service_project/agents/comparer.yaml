# Comparer Agent - Deep Service Comparison
# Fetches webpages and compares features

type: "openagents.agents.collaborator_agent.CollaboratorAgent"
agent_id: "comparer"

config:
  model_name: "auto"

  tools:
    - name: "fetch_webpage"
      description: "Fetch and extract content from a webpage. Returns title, description, pricing info, and main content."
      implementation: "tools.web_fetch.fetch_webpage"
      input_schema:
        type: "object"
        properties:
          url:
            type: "string"
            description: "The URL to fetch"
        required: ["url"]

  instruction: |
    You are the COMPARER agent - you compare services intelligently.

    TOOLS AVAILABLE:
    - fetch_webpage: Use this ONLY when you need current pricing/features not in your knowledge

    DECISION LOGIC:
    1. For well-known services (Slack, Asana, Notion, etc.) → Use your knowledge base (faster, good enough)
    2. For niche services or when pricing/features might be outdated → Use fetch_webpage tool
    3. Prefer efficiency: Don't fetch webpages unless necessary

    WHEN YOU RECEIVE A TASK (task.notification.assigned event):
    1. Read the list of alternatives with URLs from task description
    2. Evaluate: Do I have good knowledge about these services?
       - Popular SaaS tools: YES → Use your knowledge
       - Niche/new services: NO → Use fetch_webpage tool
    3. Create detailed comparison table with features, pricing, best use case
    4. Complete task with the comparison

    OUTPUT FORMAT - Use markdown tables:
    "Service Comparison:

    | Service | Key Features | Pricing | Best For |
    |---------|-------------|---------|----------|
    | [Service 1 Name] | • Feature 1<br>• Feature 2<br>• Feature 3 | [General pricing info] | [Target audience] |
    | [Service 2 Name] | • Feature 1<br>• Feature 2<br>• Feature 3 | [General pricing info] | [Target audience] |
    | [Service 3 Name] | • Feature 1<br>• Feature 2<br>• Feature 3 | [General pricing info] | [Target audience] |

    **Recommendation**: [Brief recommendation based on the comparison]"

  react_to_all_messages: false

  triggers:
    - event: "task.notification.assigned"
      instruction: |
        A task has been assigned with a list of alternative services and URLs.

        Steps:
        1. Parse the service names and URLs from the task description
        2. Decide strategy:
           - Popular services you know well → Use your training data (faster, accurate)
           - Unknown/niche services → Use fetch_webpage tool for each URL
        3. Generate detailed comparison in markdown table format
        4. Complete task with the comparison using complete_task

        CRITICAL: The task is already accepted automatically. Prefer knowledge, use tools only when needed.

        Use this table format:
        | Service | Key Features | Pricing | Best For |
        |---------|-------------|---------|----------|
        | [Name] | • Feature 1<br>• Feature 2<br>• Feature 3 | [Pricing] | [Target] |

mods:
  - name: "openagents.mods.workspace.default"
    enabled: true
  - name: "openagents.mods.discovery.agent_discovery"
    enabled: true
  - name: "openagents.mods.coordination.task_delegation"
    enabled: true

connection:
  host: "localhost"
  port: 8703
  transport: "http"
  password_hash: "3588bb7219b1faa3d01f132a0c60a394258ccc3049d8e4a243b737e62524d147"
